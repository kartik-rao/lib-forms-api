#foreach($group in $context.identity.claims.get("cognito:groups"))
    $util.qr($ctx.stash.put("group", $group))
    #if($group == "Admin")
        #set($isAdmin = true)
        $util.qr($ctx.stash.put("isAdmin", true))
    #end
#end
## Only Admins allowed
#if (!$isAdmin == true)
    $utils.unauthorized()
#end
#set($attribs = $context.arguments)
{
    "version"   : "2018-05-29",
    "operation" : "Query",
    "index"    : "${index_appdata_gsi}",
    "query"     : {
      "expression": "#type = :objectType",
      "expressionNames" : {
            "#type" : "type"
        },
      "expressionValues" : {
        ":objectType" : { "S": "FORM" }
      }
  },
  "limit": $util.defaultIfNull(${ctx.args.limit}, 20),
  "nextToken": $util.toJson($util.defaultIfNullOrBlank($ctx.args.nextToken, null))
}